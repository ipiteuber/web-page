{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
  <h2>{{ form.instance.pk|yesno:"Edit Product,New Product" }}</h2>
  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-success">Save</button>
    <a href="{% url 'product_list' %}" class="btn btn-secondary">Cancel</a>
  </form>
</div>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
const form = document.querySelector('form');
form.addEventListener('submit', function(e) {
  e.preventDefault();
  Swal.fire({
    title: 'Save this product?',
    icon: 'question',
    showCancelButton: true,
    confirmButtonText: 'Yes',
    cancelButtonText: 'Cancel',
    confirmButtonColor: '#28a745'
  }).then((result) => {
    if (result.isConfirmed) {
      form.submit();
    }
  });
});
</script>
{% endblock %}
